// Backbone.Boneyard
// v0.1.0
//
// Copyright (c)2014 SOOMLA inc.
// Distributed under MIT license
//
// https://github.com/soomla/backbone.boneyard

!function(a,b){"object"==typeof exports?module.exports=b(require("backbone")):"function"==typeof define&&define.amd?define(["backbone"],b):b(a.Backbone)}(this,function(a){a.Boneyard={VERSION:"0.1.0"};var b={forwardEvent:function(a,b,c){var d=this;return b.listenTo(d,a,function(){var d=_.toArray(arguments);b.trigger.apply(b,[c||a].concat(d))}),this},bubbleEventsTo:function(b){if(!b)throw"Error: can't bubble events to an undefined target.";if(!b.trigger)throw"Error: target object must have Backbone.Events mixed in.";var c=Array.prototype.slice,d=c.call(arguments,1);return 0===d.length?this.on("all",function(){a.Events.trigger.apply(b,arguments)}):(d=d[0].split(/\s+/),_.each(d,function(d){this.on(d,function(){var e=c.call(arguments);e.unshift(d),a.Events.trigger.apply(b,e)})},this)),this},listenToMany:function(a,b,c){return _.each(a,function(a){this.listenTo(a,b,c)},this),this}};_.each(["Model","Collection","View","Router","History"],function(c){_.extend(a[c].prototype,b)}),_.extend(a,b),_.extend(a.Events,b),_.extend(a.Model.prototype,{unsetMany:function(){var a={},b=_.toArray(arguments);_.isObject(_.last(b))&&(a=_.last(b),b=_.initial(b)),_.each(b,function(b){this.unset(b,a)},this)}}),_.extend(a.Collection.prototype,{move:function(a,b,c){if(c||(c={}),0>b||b>=this.size())throw new Error("Can't move model to an 'out of bounds' index");var d=this.indexOf(a);if(-1==d)throw new Error("Can't move a model that's not in the collection");d!==b&&(this.models.splice(b,0,this.models.splice(d,1)[0]),c.silent||this.trigger("reset"))},removeById:function(a,b){if(b||(b={}),!_.isUndefined(a)){var c=this.get(a);if(_.isUndefined(c)){if("first"===b.fallback)return this.remove(this.first(),b);if("last"===b.fallback)return this.remove(this.last(),b)}return this.remove(c,b)}},getOrAdd:function(a,b){b||(b={});var c=this.get(a);return _.isUndefined(c)&&(c=this.add({id:a},b)),c}})});